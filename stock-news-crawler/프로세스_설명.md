# 뉴스 수집 프로세스 상세 설명

## 🤔 자주 묻는 질문

### Q: 153건을 수집했는데 왜 5건만 남나요?

**A: 153건은 "모든 경제 뉴스"이고, 그 중 호재만 5건입니다.**

## 📊 전체 프로세스

### 1단계: RSS 수집 (필터링 없이 전부)

```
RSS 피드 = 언론사가 제공하는 경제 뉴스 전체

한국경제 RSS (50건)
├─ "삼성전자, AI 반도체 특허 150건 획득" ✅ 호재
├─ "현대차, 대규모 리콜 사태로 주가 폭락" ❌ 악재
├─ "코스피, 2600선에서 보합 마감" ⚪ 중립
├─ "증시 내일 일정" ⚪ 중립
└─ ... (경제 뉴스 전부, 46건 더)

매일경제 RSS (50건)
구글뉴스 RSS (13건)
...

총 153건 = 호재 + 악재 + 중립 모두 포함!
```

**왜 전부 수집하나?**
- RSS는 필터링 기능이 없음
- "호재만 주세요" 같은 옵션이 없음
- 그래서 일단 전부 받아온 후, 우리가 필터링

### 2단계: 중복 제거

```
수집한 153건을 cache.json과 비교
└─ 이미 본 뉴스 = 제외
└─ 새로운 뉴스 = 다음 단계로

예시:
수집 153건
├─ 이미 본 뉴스 153건 ❌
└─ 신규 뉴스 0건 ✅ → 다음 단계로
```

**왜 중복 제거?**
- 같은 뉴스를 반복해서 보여주지 않기 위해
- 5분마다 실행하면 대부분의 뉴스가 중복됨

### 3단계: 키워드 필터링 (호재만 선별)

```
신규 뉴스에서 호재만 골라냄

예시 (만약 신규가 100건이었다면):

[악재 차단]
"현대차 리콜 사태" → "리콜" 감지 → ❌ 제외
"실적 부진으로 주가 하락" → "부진", "하락" 감지 → ❌ 제외
"구조조정 단행" → "구조조정" 감지 → ❌ 제외

[키워드 없음]
"증시 마감 보고" → 호재 키워드 없음 → ⚪ 제외
"오늘의 주요 일정" → 호재 키워드 없음 → ⚪ 제외

[점수 부족]
"신제품 출시" → 점수 1.0 (3.0 미만) → 📉 제외

[호재 통과]
"특허 150건 획득" → 점수 6.0 → ✅ 통과!
"수주 확대로 실적 호조" → 점수 8.5 → ✅ 통과!
```

**필터링 기준:**
1. 악재 키워드 포함? → 무조건 제외 ❌
2. 호재 키워드 없음? → 제외 ⚪
3. 점수 3.0 미만? → 제외 📉
4. 점수 3.0 이상? → 통과! ✅

### 4단계: 누적 저장

```
통과한 호재 뉴스 → filtered_news.json에 저장
이전 호재 뉴스 + 신규 호재 뉴스 = 전체 호재 뉴스
```

### 5단계: HTML 생성

```
전체 호재 뉴스로 HTML 생성
→ 최신순 정렬
→ 브라우저로 볼 수 있게
```

## 📈 실제 예시

### 예시 1: 첫 실행

```
1️⃣ 수집: 157건 (RSS 전체)
   ├─ 호재 뉴스 약 10건
   ├─ 악재 뉴스 약 20건
   └─ 중립 뉴스 약 127건

2️⃣ 중복 제거: 157건 → 157건 (처음이라 모두 신규)

3️⃣ 키워드 필터링: 157건 → 5건
   ├─ 악재 20건 차단 ❌
   ├─ 중립 127건 제외 ⚪
   ├─ 호재 중 점수 부족 5건 제외 📉
   └─ 호재 중 점수 충분 5건 통과 ✅

4️⃣ 저장: 5건 (순수 호재만!)
```

### 예시 2: 5분 후 재실행

```
1️⃣ 수집: 153건 (RSS 전체)
   └─ 대부분 이전과 동일한 뉴스

2️⃣ 중복 제거: 153건 → 0건
   └─ 전부 이미 본 뉴스

3️⃣ 키워드 필터링: 0건
   └─ 신규가 없으니 필터링 안함

4️⃣ 기존 유지: 5건
   └─ 이전에 저장한 5건 유지
```

### 예시 3: 1시간 후 실행

```
1️⃣ 수집: 155건 (RSS 전체)

2️⃣ 중복 제거: 155건 → 10건 신규
   └─ 10건은 새로운 뉴스

3️⃣ 키워드 필터링: 10건 → 2건
   ├─ 악재 2건 차단 ❌
   ├─ 중립 5건 제외 ⚪
   ├─ 점수 부족 1건 제외 📉
   └─ 호재 2건 통과 ✅

4️⃣ 저장: 7건 (기존 5건 + 신규 2건)
```

## 🎯 핵심 정리

### 수집 vs 필터링

| 단계 | 개수 | 의미 |
|------|------|------|
| 수집 | 153건 | RSS에서 받아온 **모든** 경제 뉴스 |
| 중복 제거 | 0건 | 이미 본 뉴스 제외한 **신규** 뉴스 |
| 필터링 | 0건 | 신규 중 호재 키워드 있는 뉴스 |
| 누적 | 5건 | 지금까지 모은 **순수 호재** 뉴스 |

### 153건의 정체

```
153건 = 호재(10%) + 악재(15%) + 중립(75%)
        ↓
    필터링 (호재만 선별)
        ↓
    5건 = 순수 호재 100%
```

## 💡 비유

**슈퍼마켓에서 과일 사기**

```
1단계: 슈퍼마켓 전체 과일 구경 (153개)
   - 사과, 배, 썩은 과일, 덜 익은 과일 전부

2단계: 이미 산 과일 제외 (0개 신규)
   - 다 어제 본 과일들

3단계: 좋은 과일만 선별 (0개)
   - 신규가 없으니 선별 안함

4단계: 장바구니에 담긴 과일 (5개)
   - 어제 골라놓은 좋은 과일 5개 유지
```

## 🔍 확인 방법

```bash
# 현재 상태 확인
python check_data.py

# 실행 이력 확인
python view_history.py

# 누적된 호재 뉴스 보기
start output\index.html
```

---

**핵심:** RSS는 필터 없이 전부 수집하고, 우리가 호재만 골라냅니다!

